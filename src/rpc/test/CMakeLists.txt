CMAKE_MINIMUM_REQUIRED(VERSION 3.5)
PROJECT(TDengine)

INCLUDE_DIRECTORIES(${TD_COMMUNITY_DIR}/src/rpc/inc)

IF (TD_LINUX)
  LIST(APPEND CLIENT_SRC ./rclient.c)
  ADD_EXECUTABLE(rclient ${CLIENT_SRC})
  TARGET_LINK_LIBRARIES(rclient trpc)

  LIST(APPEND SCLIENT_SRC ./rsclient.c)
  ADD_EXECUTABLE(rsclient ${SCLIENT_SRC})
  TARGET_LINK_LIBRARIES(rsclient trpc)

  LIST(APPEND SERVER_SRC ./rserver.c)
  ADD_EXECUTABLE(rserver ${SERVER_SRC})
  TARGET_LINK_LIBRARIES(rserver trpc)
ENDIF ()

IF (TD_DARWIN)
  LIST(APPEND CLIENT_SRC ./rclient.c)
  ADD_EXECUTABLE(rclient ${CLIENT_SRC})
  TARGET_LINK_LIBRARIES(rclient trpc)

  LIST(APPEND SCLIENT_SRC ./rsclient.c)
  ADD_EXECUTABLE(rsclient ${SCLIENT_SRC})
  TARGET_LINK_LIBRARIES(rsclient trpc)

  LIST(APPEND SERVER_SRC ./rserver.c)
  ADD_EXECUTABLE(rserver ${SERVER_SRC})
  TARGET_LINK_LIBRARIES(rserver trpc)
ENDIF ()
