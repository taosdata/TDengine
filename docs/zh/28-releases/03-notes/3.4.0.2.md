---
title: 3.4.0.2 版本说明
sidebar_label: 3.4.0.2
description: 3.4.0.2 版本说明
---

## 特性

  1. 特性：TSDB 初始化时新建 xnode
  2. 特性：Explorer 许可证页面展示机器码便于复制
  3. 特性：taosX Agent 适配 XNODE 高可用
  4. 特性：taosX 支持导入 Parquet 文件
  5. 特性：adapter 增加 STMT 的 SQL 输出
  6. 特性：Rust 原生连接支持 STMT2
  7. 特性：流计算和批查询的事件、状态窗口 true_for 判断支持持续时间与持续条数双条件

## 优化

  1. 优化：STMT 查询支持 interval 参数绑定
  2. 优化：为 SQL 语句提供更加明确的报错信息
  3. 优化：XNODE TASK 添加 created_by/labels 字段
  4. 优化：优化登录校验逻辑，强制使用默认密码登录的 root 用户修改密码
  5. 优化：完善数据加密对 bse 等文件的处理机制
  6. 优化：增加用户 token 相关的通知机制
  7. 优化：支持从旧版本数据加密机制集群升级至新版本
  8. 优化：支持使用 create totp_secret 语法创建 TOTP 密钥
  9. 优化：同时支持 IPv4 & IPv6 协议栈
 10. 优化：支持更新数据加密密钥的过期时间和过期策略
 11. 优化：MQTT Topic 支持任意字符
 12. 优化：重命名 lag 函数为 fill_forward，后续重新开发兼容 MySQL 的 Lag 函数
 13. 优化：提升虚拟表仅含单个原始表时 cols + last 查询的性能
 14. 优化：支持用户修改权限控制
 15. 优化：完善视图和审计相关的权限控制
 16. 优化：处理 3.3 至 3.4 版本的权限兼容性
 17. 优化：数据加密生效后禁止用户篡改配置文件
 18. 优化：优化流计算定时触发的通知内容，新增触发开始时间与结束时间字段（沿用 windowStart 和 windowEnd 字段名）
 19. 优化：虚拟表引用原始表的数目上限从 1000 调整为 2000
 20. 优化：降低流计算查询语句包含虚拟表标签过滤条件时计算延迟
 21. 优化：优化流计算查询语句的语法，支持 _twstart 等占位符在 ORDER BY 子句中使用
 22. 优化：最外层关联查询带 limit 但未指定 order by 时 limit 不生效的问题

## 修复

  1. 修复：虚拟表执行 show create table 语句时返回结果错误
  2. 修复：InfluxDB 数据迁移特殊情况下空指针错误
  3. 修复：流计算在管理节点切主后因心跳消息处理不当导致的程序崩溃问题
  4. 修复：UDF 函数初始化失败时的内存泄漏问题
  5. 修复：taosX 迁移 influxdb 报错误语法存在 '\' 错误
  6. 修复：流计算调用 concat 函数返回结果错误的问题
  7. 修复：taoskeeper 支持特殊字符密码
  8. 修复：多级存储迁移任务定时执行时间不准确的问题
  9. 修复：AVEVA Historian 数据源迁移方式采集异常
 10. 修复：状态窗口处理多分组数据时，个别分组窗口内数据全为 NULL 值导致计算结果错误的问题
 11. 修复：删除流计算结果子表并重建后，计算结果出现异常的问题
 12. 修复：STMT 写入并发较大量时客户端可能发生崩溃的问题
 13. 修复：密码重用限制的默认时间配置错误问题
 14. 修复：不带 FROM 子句的子查询执行 JOIN 操作时返回错误的问题
 15. 修复：MySQL 任务在数据很少的情况下可能陷入阻塞
 16. 修复：移除重复的报错信息
 17. 修复：流计算中 true_for 选项在乱序数据写入场景下触发逻辑错误的问题
 18. 修复：taosX 原生接口 TMQ 错误兼容性问题
 19. 修复：xnoded 关闭逻辑导致 stop taosd 偶发卡住
 20. 修复：删除用户后其已创建的订阅无法取消的问题
 21. 修复：group_concat 函数与 count_window 联合使用时的 crash 问题
 22. 修复：创建 OPC 的数据源任务报错
 23. 修复：v3.4.0 版本 taosExplorer 设置用户权限失败的问题

