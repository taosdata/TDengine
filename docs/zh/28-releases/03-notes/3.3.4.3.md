---
title: 3.3.4.3 版本说明
sidebar_label: 3.3.4.3
description: 3.3.4.3 版本说明
---

### 行为变更及兼容性

1. 多副本流计算中必须使用 snode
1. 增加了流计算的兼容性保证机制，避免后续函数变更产生新的兼容性问题，但之前版本的流计算必须重建，具体参见 <https://docs.taosdata.com/advanced/stream/#流计算升级故障恢复>
1. 调整 case when 语句结果类型的判断方法

### 新特性

1. 新功能：流计算的 TWA 函数支持时间驱动的结果推送模式
1. 新功能：流计算的 Interp 函数支持时间驱动的结果推送模式
1. 新功能：支持微软对象存储

### 优化

1. 优化：提升并发大查询时节点之间互相拉数据的效率
1. 优化：支持使用 AVX2 和 AVX512 对 double、timestamp 和 bigint 类型进行解码优化
1. 优化：调整 case when 语句的结果类型判断方法
1. 优化：顺序执行 compact 和 split vgroup 操作时的日志错误提示
1. 优化：提升查询 `select ... from ... where ts in (...)` 的数据扫描速度
1. 优化：增加了流计算的兼容性保证机制，避免后续函数变更产生新的兼容性问题，之前版本的流计算必须重建
1. 优化：提升 taosX 在交叉写入场景下的数据同步性能
1. 优化：支持关闭整数/浮点数类型的编码
1. 优化：多副本流计算中必须使用 snode
1. 优化：客户端生成唯一 ID 标识每一个查询任务，避免重复 ID 导致的内存损坏
1. 优化：加快数据库的创建时间
1. 优化：修改 s3MigrateEnabled 默认值为 0
1. 优化：支持在审计数据库中记录删除操作
1. 优化：支持在指定的 dnode 中创建数据库 [企业版]
1. 优化：调整删除超级表数据列时的报错信息

### 修复

1. 修复：last_row 查询性能在 3.3.3.0 中大幅下降的问题
1. 修复：WAL 条目不完整时 taosd 无法启动的问题
1. 修复：partition by 常量时查询结果错误的问题
1. 修复：标量函数包含 _wstart 且填充方式为 prev 时计算结果错误
1. 修复：Windows 平台下的时区设置问题
1. 修复：空数据库进行 compact 操作时，事务无法结束【企业版】
1. 修复：事务冲突的逻辑错误
1. 修复：管理节点某些错误会导致事务无法停止
1. 修复：管理节点某些错误会导致事务无法停止
1. 修复：dnode 数据清空后 taosc 重试错误的问题
1. 修复：Data Compact 被异常终止后，中间文件未被清理
1. 修复：新增列后，Kafka 连接器的 earliest 模式消费不到新列数据
1. 修复：interp 函数在 fill(prev) 时行为不正确
1. 修复：TSMA 在高频元数据操作时异常停止的问题
1. 修复：show create stable 语句执行结果的标签显示错误
1. 修复：Percentile 函数在大数据量查询时会崩溃。
1. 修复：partition by 和 having 联合使用时的语法错误问题
1. 修复：interp 在 partition by tbname,c1 时 tbname 为空的问题
1. 修复：通过 stmt 写入非法布尔数值时 taosd 可能 crash
1. 修复：库符号 version 与使用相同符号的库冲突的问题
1. 修复：在 windows 平台下 JDBC 驱动的句柄数持续升高问题
1. 修复：3.3.3.1 升级至 3.3.4.0 偶现的启动失败问题
1. 修复：Windows 平台重复增删表的内存泄漏
1. 修复：无法限制并发拉起 checkpoint 数量导致流计算消耗资源过多
1. 修复：并发查询时的 too many session 问题
1. 修复：Windows 平台下 TDengine TSDB CLI 在慢查询场景中崩溃的问题
1. 修复：当打开 dnode 日志时，加密数据库无法恢复的问题
1. 修复：由于 mnode 同步超时，进而导致 taosd 无法启动的问题
1. 修复：由于在快照同步过程中整理文件组数据的速度过慢，从而导致 Vnode（虚拟节点）无法恢复的问题
1. 修复：通过行协议向字符串类型的字段中写入带转义符的数据时，taosd 会崩溃
1. 修复：Error Code 逻辑处理错误导致的元数据文件损坏
1. 修复：查询语句中包含多个“not”条件语句嵌套时，未设置标量模式导致查询错误
1. 修复：vnode 统计信息上报超时导致的 dnode offline 问题
1. 修复：在不支持 avx 指令集的服务器上，taosd 启动失败问题
1. 修复：taosX 数据迁移容错处理 0x09xx 错误码
