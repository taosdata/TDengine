---
title: TDengine 3.4.0.0 Release Notes
sidebar_label: 3.4.0.0
description: Version 3.4.0.0 Notes
slug: /release-history/release-notes/3.4.0.0
---

## Features

  1. feat: adapter add connector info attribute in ws connection
  2. feat: C websocket support ssl/tls connection params
  3. feat: support taosAdapter instances register and query
  4. feat: parse and write any JSON data to database
  5. feat: add rust connector benchmark tool
  6. feat: support taosX high-availability and Kafka task load balancing
  7. feat: TDgpt supports row correlation analysis functions such as dtw, dtw_path and tlcc
  8. feat: data transmission supports SASL mechanism and resource control [Enterprise Edition]
  9. feat: data storage supports full transparent encryption [Enterprise Edition]
 10. feat: support multi-factor authentication (MFA) and multiple login security policies [Enterprise Edition]
 11. feat: support RBAC-based permission architecture [Enterprise Edition]
 12. feat: support hierarchical auditing and permission control [Enterprise Edition]
 13. feat: Support SM4_ENCRYPT, SM4_DECRYPT, AES_ENCRYPT, AES_DECRYPT, MD5, SHA, SHA1, SHA2, MASK_FULL, MASK_PARTIAL, MASK_NONE, FROM_BASE64 and TO_BASE64 functions
 14. feat: event window triggering of stream supports sub-event windows
 15. feat: Explorer add support for OAuth 2.0 and OIDC SSO
 16. feat: taosAdapter support customized SQL rejection rules
 17. feat: add identity authentication functions

## Enhancements

  1. enh: increase the maximum number of columns supported by virtual tables to 32767
  2. enh: prohibit sorting by aggregate functions in non-aggregate queries
  3. enh: state windows now support specifying a "zero state" via zeroth_state, skipping computation and output for windows in this state.
  4. enh: optimize the error message when taosc initialization fails due to insufficient write permissions for the log file directory
  5. enh: stream now supports interp and percentile functions
  6. enh: reduce resource consumption of trigger data and computation data reading in stream computing
  7. enh: prohibit the use of duplicate timestamps in state_window, count_window and event_window on super tables
  8. enh: improved the exit handling logic of taosmqtt to achieve a more graceful shutdown and resource release
  9. enh: set the global timezone to reduce lock contention related to time conversion during concurrent queries and writes
 10. enh: window query do not require mandatory aggregate functions, support including only pseudo-columns like _wstart and tbname
 11. enh: Linux tar package supports non-root installation of TDengine TSDB with custom install path
 12. enh: after modifying tag columns, support data subscription to take effect without reconstruction by executing the RELOAD TOPIC command
 13. enh: support recording operations such as query and deletion in audit logs
 14. enh: add the client version number field to the show connections command.
 15. enh: add status and note fields to the ins_anodes_full table for real-time feedback on model and algorithm status
 16. enh: add two Hints parameters (WIN_OPTIMIZE_BATCH and WIN_OPTIMIZE_SINGLE) to improve the state window query performance of virtual tables
 17. enh: support encryption algorithm management [Enterprise Edition]
 18. enh: add clock check mechanism for communication between clusters
 19. enh: add support for virtual table queries in stmt2
 20. enh: compact command now support the force option
 21. enh: improve the query performance of aggregate and selection functions for virtual super tables
 22. enh: support for user login failure policies
 23. enh: optimize OPC-DA collection and auto-reconnection
 24. enh: execution plan supports displaying tag indexes
 25. enh: add the 'is_ready' column to the show vgroups command
 26. enh: add bool type validation during stmt2 writing
 27. enh: adjust the logs of stmt2 to facilitate problem troubleshooting
 28. enh: event window of stream generates window opening notifications only when the true_for condition is met
 29. enh: optimize the usage logic of read-write locks in RPC communication
 30. enh: return immediately when updating sub-table tags if the tag value remains unchanged, avoiding frequent updates to the sub-table set of data subscriptions

## Fixes

  1. fix: the latest WAL version number was not used when stream triggered data recalculation, resulting in incorrect calculation results
  2. fix: query error when col in order by abs(col) exists in result set instead of table
  3. fix: the results of show create table and SELECT distinct tbname, json_tag_name are not as expected when the TAG column is of JSON type
  4. fix: when parsing the output table tag name in the stream creation statement, the backtick (`) was mistakenly taken as part of the column name, which did not match the column name of the table created manually via SQL, resulting in the "Ou
  5. fix: resolve incorrect query results when subqueries in nested queries use descending sorting, no sorting, or sorting by non-time primary key
  6. fix: concurrency issue caused by modifying tdb while data subscription is in progress
  7. fix: OPCUA download data points not work when edit
  8. fix: support import alert dashboard for Grafana 12.x
  9. fix: the cache_load field of ins_vgroups is displayed as a negative value when it exceeds the maximum value of int32
 10. fix: potential crash risks during query memory control
 11. fix: stream fails to calculate historical data when using FILL_HISTORY
 12. fix: stream errors when reading data cause subsequent computing tasks to wait
 13. fix: no longer require sorting when the time primary key of sub-tables in JOIN syntax is a constant
 14. fix: Kafka extract/split with depth error
 15. fix: schema and tag synchronization issue when the stream result table already exists
 16. fix: resolve the issue of failed rawdata data subscription
 17. fix: Explorer upload monitor to taoskeeper by default
 18. fix: crash caused by excessively long table names during STMT2 automatic table creation on write
 19. fix: "Invalid value in client" error is triggered when querying virtual super tables
 20. fix: KingHistorian subscription not work
 21. fix: incorrect tbname processing logic when writing data via the insert into stable syntax
 22. fix: the issue of probabilistic failure when stream sends event notifications via WebSocket
 23. fix: taosX req_id can't find in other components
 24. fix: node.js support no timezone on window
 25. fix: Explorer login error without subpath
 26. fix: transactions cannot end when modifying global variables
 27. fix: latency issue in opc-ua
 28. fix: logic error caused by columns of multiple virtual tables using the same original table column
 29. fix: taosAdapter crash caused by callback function not being called after stmt query returns
 30. fix: taosX may cause sql too long with 100k message per row
 31. fix: data is written to an incorrect dnode and triggers the "Vnode is closed" error when executing insert into select statements
 32. fix: coredump occurs when the join query in stream subquery contains the tag==%%n condition
 33. fix: unexpected split result in transform
 34. fix: field_type error in c ws taos_stmt2_get_fields
 35. fix: incorrect data source was invoked when using anomaly detection in stream
 36. fix: the issue that query processes get stuck when both dbname and tbname are set to `?` in query statements executed via stmt2
 37. fix: InfluxDB no tag measurements data in error
 38. fix: errors occurring when modifying the internal table structure concurrently during schemaless writing
 39. fix: incorrect results when querying with state window and partition by
 40. fix: errors in the outer cols function of nested queries
 41. fix: AVEVA Historian data in configuration error
 42. fix: resolve the crash issue when querying virtual tables that reference data columns of the same name but different types in sub-tables
 43. fix: abnormal data loading issue when upgrading from version 3.3.6.32-3.3.6.36 to 3.3.8.6-3.3.8.10
 44. fix: crash occurs occasionally during disk flushing for decimal-type data with NULL values when caching is enabled
 45. fix: client cannot perceive table schema modifications made by other clients
 46. fix: PI/PI-Backfill ingestion error with period sign
 47. fix: not found model in dsn error while creating pi tasks
 48. fix: taosgen coredump in case of incorect csv format
 49. fix: crash occurs when stream triggers table creation without carrying written data
