---
title: Telegraf
description: Writing Data to TDengine Using Telegraf
slug: /third-party-tools/data-collection/telegraf
---

import Telegraf from "./_telegraf.mdx"

Telegraf is a very popular open-source metrics collection software. In data collection and platform monitoring systems, Telegraf can collect operational information from various components without the need to write custom scripts for periodic collection, reducing the difficulty of data acquisition.

By simply adding the output configuration of Telegraf to point to the corresponding URL of taosAdapter and modifying several configuration items, Telegraf can write data into TDengine. Storing Telegraf data in TDengine allows users to fully leverage TDengine's efficient storage and querying performance for time-series data and its cluster processing capabilities.

## Prerequisites

To write Telegraf data into TDengine, the following preparations are required:

- The TDengine cluster has been deployed and is running normally.
- The taosAdapter has been installed and is running normally. For detailed information, please refer to the [taosAdapter User Manual](../../../tdengine-reference/components/taosadapter/).
- Telegraf has been installed. For installation, please refer to the [official documentation](https://docs.influxdata.com/telegraf/v1.22/install/).
- Telegraf collects system operational state data by default. By enabling [input plugins](https://docs.influxdata.com/telegraf/v1.22/plugins/), it can output [other formats](https://docs.influxdata.com/telegraf/v1.24/data_formats/input/) of data to Telegraf and then write it into TDengine.

## Configuration Steps

<Telegraf />

## Verification Method

Restart the Telegraf service:

```shell
sudo systemctl restart telegraf
```

Use TDengine CLI to verify that data is written from Telegraf to TDengine and can be read correctly:

```text
taos> show databases;
              name              |
=================================
 information_schema             |
 performance_schema             |
 telegraf                       |
Query OK, 3 rows in database (0.010568s)

taos> use telegraf;
Database changed.

taos> show stables;
              name              |
=================================
 swap                           |
 cpu                            |
 system                         |
 diskio                         |
 kernel                         |
 mem                            |
 processes                      |
 disk                           |
Query OK, 8 row(s) in set (0.000521s)

taos> select * from telegraf.system limit 10;
              ts               |           load1           |           load5           |          load15           |        n_cpus         |        n_users        |        uptime         | uptime_format |              host
|
=============================================================================================================================================================================================================================================
 2022-04-20 08:47:50.000000000 |               0.000000000 |               0.050000000 |               0.070000000 |                     4 |                     1 |                  5533 |  1:32         | shuduo-1804
|
 2022-04-20 08:48:00.000000000 |               0.000000000 |               0.050000000 |               0.070000000 |                     4 |                     1 |                  5543 |  1:32         | shuduo-1804
|
 2022-04-20 08:48:10.000000000 |               0.000000000 |               0.040000000 |               0.070000000 |                     4 |                     1 |                  5553 |  1:32         | shuduo-1804
|
Query OK, 3 row(s) in set (0.013269s)
```

:::note

The subtable names generated by TDengine when receiving influxdb format data are unique ID values generated based on specific rules.
If users need to specify the generated table name, they can configure the `smlChildTableName` parameter in `taos.cfg`. By controlling the input data format, users can utilize this feature of TDengine to specify the generated table name.
For example, configuring `smlChildTableName=tname` and inserting data as `st,tname=cpu1,t1=4 c1=3 1626006833639000000` will create the table name as `cpu1`. If multiple rows of data have the same `tname`, but different `tag_set`, the tag_set specified when the first row was automatically created will be used, and the other rows will be ignored. For more details, see the [TDengine Schemaless Writing Reference Guide](../../../developer-guide/schemaless-ingestion/).

:::
