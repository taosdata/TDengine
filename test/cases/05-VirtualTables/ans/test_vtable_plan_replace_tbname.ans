
taos> set max_binary_display_width 300;
taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 >= "2020-01-01 00:00:00" and _c0 < "2020-01-02 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [1577808000000, 1577894399999]                                                                                                                                                                                                                                                          |

taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 >= "2020-01-04 00:00:00" and _c0 < "2020-01-05 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [1578067200000, 1578153599999]                                                                                                                                                                                                                                                          |

taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 >= "2020-01-04 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [1578067200000, 9223372036854775807]                                                                                                                                                                                                                                                    |

taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 <= "2020-01-04 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 1578067200000]                                                                                                                                                                                                                                                   |

taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 > "2020-01-04 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [1578067200001, 9223372036854775807]                                                                                                                                                                                                                                                    |

taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 < "2020-01-04 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 1578067199999]                                                                                                                                                                                                                                                   |

taos> explain verbose true select * from test_vtable_select.vtb_virtual_ntb_full where _c0 = "2020-01-04 00:00:00" partition by tbname;
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Projection (columns=16 width=299 input_order=asc )                                                                                                                                                                                                                                                        |
       Output: columns=16 width=299                                                                                                                                                                                                                                                                           |
       Output: Ignore Group Id: true                                                                                                                                                                                                                                                                          |
       Merge ResBlocks: True                                                                                                                                                                                                                                                                                  |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [1578067200000, 1578067200000]                                                                                                                                                                                                                                                          |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full partition by tbname STATE_WINDOW(CASE WHEN tbname = 'vtb_virtual_ntb_full' THEN 1 ELSE 0 END);
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> StateWindow on Column  (functions=1 width=8)                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=307 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full partition by tbname STATE_WINDOW(tbname);
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> StateWindow on Column  (functions=1 width=8)                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=321 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full STATE_WINDOW(CASE WHEN tbname = 'vtb_virtual_ntb_full' THEN 1 ELSE 0 END);
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> StateWindow on Column  (functions=1 width=8)                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=307 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full STATE_WINDOW(tbname);
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> StateWindow on Column  (functions=1 width=8)                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
       Output: columns=1 width=8                                                                                                                                                                                                                                                                              |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=321 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full partition by tbname EVENT_WINDOW START WITH tbname = 'vtb_virtual_ntb_full' END WITH tbname = 'vtb_virtual_ntb_full';
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Event (functions=1 width=8)                                                                                                                                                                                                                                                                               |
       Start Cond: true                                                                                                                                                                                                                                                                                       |
       End Cond: true                                                                                                                                                                                                                                                                                         |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full EVENT_WINDOW START WITH tbname = 'vtb_virtual_ntb_full' END WITH tbname = 'vtb_virtual_ntb_full';
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Event (functions=1 width=8)                                                                                                                                                                                                                                                                               |
       Start Cond: true                                                                                                                                                                                                                                                                                       |
       End Cond: true                                                                                                                                                                                                                                                                                         |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full partition by tbname EVENT_WINDOW START WITH tbname != 'vtb_virtual_ntb_full' END WITH tbname != 'vtb_virtual_ntb_full';
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Event (functions=1 width=8)                                                                                                                                                                                                                                                                               |
       Start Cond: false                                                                                                                                                                                                                                                                                      |
       End Cond: false                                                                                                                                                                                                                                                                                        |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

taos> explain verbose true select count(*) from test_vtable_select.vtb_virtual_ntb_full EVENT_WINDOW START WITH tbname != 'vtb_virtual_ntb_full' END WITH tbname != 'vtb_virtual_ntb_full';
                                                                                                                                                  QUERY_PLAN                                                                                                                                                  |
===============================================================================================================================================================================================================================================================================================================
 -> Event (functions=1 width=8)                                                                                                                                                                                                                                                                               |
       Start Cond: false                                                                                                                                                                                                                                                                                      |
       End Cond: false                                                                                                                                                                                                                                                                                        |
    -> Table Scan on vtb_org_normal_0 (columns=16 width=299 order=[asc|1 desc|0] mode=ts_order data_load=data)                                                                                                                                                                                                |
          Output: columns=16 width=299                                                                                                                                                                                                                                                                        |
          Time Range: [-9223372036854775808, 9223372036854775807]                                                                                                                                                                                                                                             |

