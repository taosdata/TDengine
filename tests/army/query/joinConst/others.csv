
taos> use test;
Database changed.

taos> select * from a1 a join (select today + 1d + 2s as ts, f, g, 'a' from b1) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a join (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a join (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b on a.ts = timetruncate(b.ts, 1d);
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a join (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b on a.ts = timetruncate(b.ts + 1s, 1d);
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from (select ts + 2s as ts,f from a1) a join (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b on a.ts = b.ts;
           ts            |      f      |           ts            |      f      |      g      | 'a' |
====================================================================================================
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a join (select case when 1 > 0 then timestamp '__today__ 00:00:00.000' else timestamp '__tomorrow__ 00:00:00.000' end as ts, f, g, 'a' from b1) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         302 |        3012 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         303 |        3013 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         304 |        3014 | a   |

taos> select * from a1 a join (select timestamp '__today__ 00:00:00.000' + 1s as ts, f, g, 'a' from b1) b on a.ts = b.ts + 1d + 1s;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         304 |        3014 | a   |

taos> select * from a1 a join (select timestamp '__today__ 00:00:00.000' + 1s as ts, f, g, 'a' from b1) b on a.ts = timetruncate(b.ts + 1d + 1s, 1d) + 2s;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select today + 1d + 2s as ts, f, g, 'a' from b1) b where a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b where a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b where a.ts = timetruncate(b.ts, 1d);
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b where a.ts = timetruncate(b.ts + 1s, 1d);
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from (select ts + 2s as ts,f from a1) a, (select timestamp '__today__ 00:00:00.000' + 1d + 2s as ts, f, g, 'a' from b1) b where a.ts = b.ts;
           ts            |      f      |           ts            |      f      |      g      | 'a' |
====================================================================================================
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         103 | __tomorrow__ 00:00:02.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select case when 1 > 0 then timestamp '__today__ 00:00:00.000' else timestamp '__tomorrow__ 00:00:00.000' end as ts, f, g, 'a' from b1) b where a.ts = b.ts; 
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         302 |        3012 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         303 |        3013 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select timestamp '__today__ 00:00:00.000' + 1s as ts, f, g, 'a' from b1) b where a.ts = b.ts + 1d + 1s;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select timestamp '__today__ 00:00:00.000' + 1s as ts, f, g, 'a' from b1) b where a.ts = timetruncate(b.ts + 1d + 1s, 1d) + 2s;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         301 |        3011 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         302 |        3012 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         303 |        3013 | a   |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:01.000 |         304 |        3014 | a   |

taos> select * from a1 a, (select today as ts, f, g, 'a' from b1) b where a.ts = b.ts order by b.ts, b.f desc;
           ts            |      f      |      g      |           ts            |      f      |      g      | 'a' |
==================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         304 |        3014 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         303 |        3013 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         302 |        3012 | a   |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 | a   |

taos> select count(*) from a1 a, (select today as ts, f, g, 'a' from b1) b where a.ts = b.ts group by b.ts order by b.ts;
       count(*)        |
========================
                     4 |

taos> select b.ts, count(*) from a1 a left join (select today as ts, f, g, 'a' from b1) b on a.ts = b.ts group by b.ts order by b.ts;
           ts            |       count(*)        |
==================================================
 NULL                    |                     3 |
 __today__ 00:00:00.000 |                     4 |

taos> select * from (select * from a1 order by ts desc) a join (select today as ts1, * from b1 order by ts1 desc) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> /*table+subq*/
taos> select * from a1 a join (select * from b1 order by ts) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      |
============================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from a1 a join (select * from b1 order by ts desc) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      |
============================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |

taos> /*table+const subq*/
taos> select * from a1 a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from a1 a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from a1 a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from a1 a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from a1 a join (select today() as ts1, * from b1 order by f) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> /*subq+subq*/
taos> select * from (select * from a1 order by ts) a join (select * from b1 order by ts) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      |
============================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select * from a1 order by ts) a join (select * from b1 order by ts desc) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      |
============================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select * from a1 order by ts desc) a join (select * from b1 order by ts desc) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts            |      f      |      g      |
============================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |

taos> /*subq+const subq*/
taos> select * from (select * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select * from a1 order by ts) a join (select today() as ts1, * from b1 order by f) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by f) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> /*const subq+const subq*/
taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts) a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by ts desc) a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from (select today() as ts1, * from a1 order by f desc) a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1 and a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> /*functions*/
taos> select * from a1 a join (select to_timestamp('__today__', 'yyyy-mm-dd') as ts1, * from b1) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from a1 a join (select to_timestamp('__today__', 'yyyy-mm-dd') + 1s as ts1, * from b1) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from a1 a join (select to_unixtimestamp('__today__ 00:00:00.000', 1) as ts1, * from b1) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from a1 a join (select to_unixtimestamp('__today__ 00:00:00.000', 1) + 1s as ts1, * from b1) b on a.ts = b.ts1;
           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> /*view*/
taos> select * from view1 a join (select * from b1 order by ts) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a join (select * from b1 order by ts desc) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select * from b1 order by ts) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select * from b1 order by ts desc) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts            |      f      |      g      |
======================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts) b on a.ts = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts desc) b on a.ts = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by f) b on a.ts = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by ts desc) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1 where a.ts1 is null;

taos> select * from view1 a join (select today() as ts1, * from b1 order by f) b on a.ts1 = b.ts1 where a.ts1 is not null;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

taos> select * from view1 a, (select today() as ts1, * from b1 order by f) b where a.ts1 = b.ts1;
           ts1           |           ts            |      f      |      g      |           ts1           |           ts            |      f      |      g      |
================================================================================================================================================================
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:00.000 |         101 |        1011 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __today__ 00:00:01.000 |         102 |        1012 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         103 |        1013 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:00.000 |         301 |        3011 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __today__ 00:00:01.000 |         302 |        3012 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:00.000 |         303 |        3013 |
 __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         104 |        1014 | __today__ 00:00:00.000 | __tomorrow__ 00:00:02.000 |         304 |        3014 |

